---
title: 'ä¸€æ‹›è§£å†³æäº¤ä¿¡æ¯æ··ä¹± â€”â€” æ•™ä½ ä¼˜é›…æå®š Git æäº¤è§„èŒƒï¼'
publishDate: '2025-06-01 10:39:37'
description: 'è¿™ç¯‡æ–‡ç« æ•™ä½ å¦‚ä½•ç”¨ Husky + Commitlint + cz-customizable å¿«é€Ÿæ­å»ºä¸€å¥— Git æäº¤è§„èŒƒç³»ç»Ÿï¼Œå¼ºåˆ¶æ ¡éªŒæäº¤æ ¼å¼çš„åŒæ—¶ï¼Œè¿˜èƒ½é€šè¿‡äº¤äº’å¼æ–¹å¼ç”Ÿæˆæ ‡å‡†æäº¤è¯´æ˜ã€‚é€‚ç”¨äºå‰ç«¯ã€åç«¯ã€å›¢é˜Ÿåä½œé¡¹ç›®ï¼Œé™„å®Œæ•´é…ç½®æ–‡ä»¶å’Œä½¿ç”¨æŠ€å·§ï¼Œè½»æ¾æå‡ä»£ç ç®¡ç†è´¨é‡'
tags:
  - GitHub
language: 'ä¸­æ–‡'
heroImage: { src: './cover/github.jpg', color: '#000000' }
draft: false
slug: '1cf99112'
---

æœ€è¿‘æŠ˜è…¾é¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªä¸€ç›´è¢«å¿½ç•¥çš„å°é—®é¢˜â€”â€”**Git æäº¤ä¿¡æ¯å¤ªéšæ„äº†ï¼**

æœ‰çš„å†™ä¸­æ–‡ã€æœ‰çš„å…¨è‹±æ–‡ï¼Œæœ‰çš„ç›´æ¥å°±ï¼š`ä¿®æ”¹äº†`â€‹â€¦â€¦

æ¯æ¬¡çœ‹ Git log éƒ½è·Ÿçœ‹å¤©ä¹¦ä¸€æ ·ï¼Œè°åšäº†å•¥å®Œå…¨æ²¡å¤´ç»ªã€‚è€Œæˆ‘åˆä¸æƒ³åƒä¸ªç®¡ç†å‘˜ä¸€æ ·å¤©å¤©ç›¯ç€æé†’â€œä½ æäº¤ä¿¡æ¯å†™è§„èŒƒç‚¹è¡Œä¸è¡Œ ğŸ˜©â€ã€‚

äºæ˜¯æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªå°è€Œç¾çš„æ–¹æ¡ˆï¼Œèƒ½ï¼š

âœ… è‡ªåŠ¨æ£€æŸ¥æäº¤æ ¼å¼ï¼Œæ‹¦æˆªä¸è§„èŒƒæäº¤  
âœ… æäº¤æ—¶å¼¹å‡ºæç¤ºï¼Œ**å¼•å¯¼å¼**å¡«å†™æäº¤è¯´æ˜  
âœ… é…ç½®ç®€å•ï¼Œä¸ä¾èµ– Gitlab/Jenkins ä¹‹ç±» CI ç³»ç»Ÿ

å¾ˆé€‚åˆåƒæˆ‘ä¸€æ ·åˆšå¼€å§‹é‡è§†å›¢é˜Ÿåä½œè§„èŒƒçš„å°ä¼™ä¼´ï¼

---

## æˆ‘ç”¨äº†ä»€ä¹ˆæ–¹æ¡ˆï¼Ÿ

ä¸¤ä¸ªå…³é”®è¯ï¼š

### Husky

> å¸®ä½ æ‹¦ä½é‚£äº›â€œä¸åˆæ ¼â€çš„æäº¤

å®ƒä¼šåœ¨ä½ æ‰§è¡Œ `git commit`â€‹ çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œæ¯”å¦‚ï¼šæ£€æŸ¥ä½ çš„æäº¤ä¿¡æ¯æ˜¯ä¸æ˜¯ç¬¦åˆè§„èŒƒï¼Œå¹¶ä¸”æ‹’ç»é‚£äº›ä¸è§„èŒƒçš„æäº¤

### cz-customizable

> æäº¤æ—¶å¼¹ä¸ªçª—ï¼Œä½ åªç”¨é€‰å’Œå¡«

å®ƒåœ¨æäº¤æ—¶å¼¹å‡ºä¸€ä¸ªé€‰æ‹©æ¡†ï¼Œæ¯”å¦‚ï¼š

```
è¯·é€‰æ‹©ä½ åšäº†å•¥ï¼Ÿ
â¯ feat: æ–°åŠŸèƒ½
  fix: ä¿®å¤ Bug
  docs: æ–‡æ¡£æ›´æ–°
```

ç„¶åä¸€æ­¥æ­¥å¡«å®Œåè‡ªåŠ¨å¸®ä½ æ‹¼å‡ºæ ‡å‡†æ ¼å¼ï¼Œæ¯”å¦‚ï¼š

```
feat(core): æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½
```

æ˜¯ä¸æ˜¯æ¯”è‡ªå·±è®°æ ¼å¼è½»æ¾å¤šäº†ï¼

---

## æ€ä¹ˆä¸€æ­¥æ­¥æå®šï¼Ÿ

ä¸‹é¢è¿™äº›å‘½ä»¤å’Œé…ç½®éƒ½æ˜¯æˆ‘è‡ªå·±å®è·µè¿‡çš„ï¼Œè·Ÿç€ä¸€æ­¥æ­¥æ¥å°±è¡Œï¼š

### å®‰è£…å¿…è¦ä¾èµ–

```bash
npm install --save-dev husky cz-customizable commitlint @commitlint/config-conventional
```

### åˆå§‹åŒ– Husky

```bash
npx husky install
```

> è¯¥å‘½ä»¤ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.husky/`â€‹ ç›®å½•

ç„¶åæ‰§è¡Œï¼š

```json
npm pkg set scripts.prepare="husky install"
```

> è¿™æ­¥æ˜¯ä¸ºäº†ç¡®ä¿åˆ«äºº clone é¡¹ç›®åï¼Œæ‰§è¡Œ `npm install`â€‹ æ—¶è‡ªåŠ¨åˆå§‹åŒ–å¥½ Huskyã€‚

---

### æ·»åŠ ä¸€ä¸ª Git é’©å­ï¼Œç”¨æ¥æ£€æŸ¥æäº¤æ ¼å¼

```bash
mkdir -p .husky

echo 'npx commitlint --edit "$1"' > .husky/commit-msg

chmod +x .husky/commit-msg
```

---

### æ·»åŠ é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥è®¾ç½®æäº¤ä¿¡æ¯æ ¡éªŒè§„åˆ™ï¼š `commitlint.config.js`â€‹

å†…å®¹å¦‚ä¸‹ï¼š

```js
module.exports = {
  extends: ["@commitlint/config-conventional"],
  rules: {
    "type-enum": [
      2,
      "always",
      [
        "feat",
        "fix",
        "docs",
        "style",
        "refactor",
        "perf",
        "test",
        "build",
        "ci",
        "chore",
        "revert",
        "temp",
        "hotfix",
      ],
    ],
    "subject-empty": [2, "never"],
    "type-empty": [2, "never"],
    "scope-case": [0],
  },
};
```

ä»€ä¹ˆæ„æ€ï¼Ÿç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼š

â€‹`extends: ["@commitlint/config-conventional"]`â€‹ï¼šè¡¨ç¤ºç»§æ‰¿äº† `@commitlint/config-conventional`â€‹ è¿™ä¸ªé¢„è®¾é…ç½®ï¼Œå®ƒæœ¬èº«å°±å®šä¹‰äº†ä¸€å¥— [Conventional Commits](https://www.conventionalcommits.org/)ï¼ˆçº¦å®šå¼æäº¤ï¼‰è§„èŒƒï¼Œæ¯”å¦‚ `feat: æ·»åŠ æ–°åŠŸèƒ½`â€‹ã€`fix: ä¿®å¤ bug`â€‹ã€‚

â€‹`'type-enum':[2,'always',[...]]`â€‹ï¼šæŒ‡å®šå…è®¸çš„æäº¤ç±»å‹ï¼ˆ`[ç­‰çº§, åº”ç”¨æ—¶æœº, å‚æ•°]`â€‹ï¼‰

- â€‹`ç­‰çº§`â€‹ï¼š0-ä¸å¯ç”¨è§„åˆ™ï¼Œ1-è­¦å‘Š(ä¸é˜»æ­¢æäº¤)ï¼Œ2-é”™è¯¯(é˜»æ­¢æäº¤)
- â€‹`åº”ç”¨æ—¶æœº`â€‹ï¼š`always`â€‹(æ€»æ˜¯åº”ç”¨è¿™ä¸ªè§„åˆ™)ï¼Œ`never`â€‹(æ°¸ä¸åº”ç”¨è¿™ä¸ªè§„åˆ™)

- â€‹`å‚æ•°`â€‹ï¼šå…è®¸çš„æäº¤ç±»å‹åˆ—è¡¨

â€‹`'subject-empty':[2, 'never']`â€‹ï¼šä¸å…è®¸æäº¤ä¿¡æ¯çš„æè¿°ï¼ˆsubjectï¼‰ä¸ºç©ºï¼Œæ¯”å¦‚ `fix:`â€‹ è¿™ç§å°±æ˜¯ä¸å…è®¸çš„

â€‹`'type-empty': [2, 'never']`â€‹ï¼šä¸å…è®¸æäº¤ä¿¡æ¯çš„ç±»å‹ï¼ˆtypeï¼‰ä¸ºç©ºï¼Œæ¯”å¦‚ `: ä¿®å¤äº†é—®é¢˜`â€‹ è¿™ç§å°±æ˜¯ä¸å…è®¸çš„

â€‹`'scope-case': [0]`â€‹ï¼šå…³é—­ `scope`â€‹ çš„å¤§å°å†™æ£€æŸ¥ï¼ˆ0 è¡¨ç¤ºå…³é—­è¯¥è§„åˆ™ï¼‰ï¼Œscope æ˜¯æŒ‡åƒ `fix(api):`â€‹ ä¸­çš„ `api`â€‹ã€‚

æ­¤æ—¶ï¼Œæ•´ä¸ªé¡¹ç›®å°±å·²ç»å‘—é…ç½®å¥½äº†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¢«å…è®¸æäº¤çš„æ ¼å¼å¦‚ä¸‹ï¼š

```bash
âœ… feat(core): å¢åŠ æƒé™ä¸­é—´ä»¶åŠŸèƒ½
âœ… fix(route): ä¿®å¤ POST æ¥å£åŒ¹é…å¤±è´¥
âœ… docs: æ›´æ–° README æ–‡æ¡£
âŒ æ›´æ–°äº†é…ç½®æ–‡ä»¶ï¼ˆå› ä¸ºæ²¡æœ‰ typeï¼‰
âŒ build:   ï¼ˆå› ä¸ºæ²¡æœ‰ subjectï¼‰
```

---

### æœ€åä¸€æ­¥ï¼šé…ç½® `cz-customizable`â€‹ æç¤º

æ·»åŠ  `.cz-config.js`â€‹ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±ç”¨çš„ä¸€ä»½é…ç½®ï¼Œå¯ä»¥è‡ªç”±åŠ å‡ä¿®æ”¹ï¼š

```js
module.exports = {
  types: [
    { value: "feat", name: "feat: æ–°åŠŸèƒ½" },
    { value: "fix", name: "fix: ä¿®å¤ Bug" },
    { value: "docs", name: "docs: æ–‡æ¡£å˜æ›´" },
    { value: "style", name: "style: ä»£ç æ ¼å¼(ä¸å½±å“åŠŸèƒ½)" },
    {
      value: "refactor",
      name: "refactor: é‡æ„(æ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤ Bug)",
    },
    { value: "perf", name: "perf: æ€§èƒ½ä¼˜åŒ–" },
    { value: "test", name: "test: å¢åŠ æµ‹è¯•" },
    { value: "build", name: "build: æ„å»ºç›¸å…³çš„ä¿®æ”¹(å¦‚é…ç½®æ–‡ä»¶)" },
    { value: "ci", name: "ci: CI é…ç½®ä¿®æ”¹" },
    { value: "chore", name: "chore: å…¶ä»–æ‚é¡¹" },
    { value: "revert", name: "revert: å›æ»šæäº¤" },
    { value: "temp", name: "temp: ä¸´æ—¶æäº¤" },
    { value: "hotfix", name: "hotfix: ç´§æ€¥ä¿®å¤" },
  ],

  scopes: [
    { name: "api" },
    { name: "model" },
    { name: "core" },
    { name: "middleware" },
    { name: "config" },
    { name: "migration" },
    { name: "seeder" },
    { name: "view" },
    { name: "route" },
    { name: "helper" },
    { name: "exception" },
    { name: "lang" },
    { name: "log" },
    { name: "test" },
    { name: "composer" },
    { name: "env" },
    { name: "ci" },
    { name: "docs" },
    { name: "assets" },
    { name: "cron" },
    { name: "queue" },
  ],

  usePreparedCommit: false,
  allowTicketNumber: false,
  isTicketNumberRequired: false,
  ticketNumberPrefix: "TICKET-",
  ticketNumberRegExp: "\\d{1,5}",

  messages: {
    type: "è¯·é€‰æ‹©æ‚¨è¦æäº¤çš„æ›´æ”¹ç±»å‹ï¼š",
    scope: "\nè¯·æ ‡æ˜æ­¤æ¬¡æ›´æ”¹çš„èŒƒå›´ï¼ˆå¯é€‰ï¼‰ï¼š",
    customScope: "è¯·æ ‡æ˜æ­¤æ¬¡æ›´æ”¹çš„èŒƒå›´ï¼š",
    subject: "è¯·ç”¨ç®€çŸ­çš„ç¥ˆä½¿å¥æè¿°æ­¤æ¬¡æ›´æ”¹ï¼š\n",
    body: "æä¾›æ›´è¯¦ç»†çš„æ›´æ”¹æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨â€œ|â€æ¢è¡Œï¼š\n",
    breaking: "åˆ—å‡ºä»»ä½•é‡å¤§æ›´æ”¹ï¼ˆå¯é€‰ï¼‰ï¼š\n",
    footer: "åˆ—å‡ºæ­¤æ›´æ”¹å…³é—­çš„ç›¸å…³é—®é¢˜ï¼ˆå¯é€‰ï¼‰ï¼Œä¾‹å¦‚ï¼š#31ï¼Œ#34ï¼š\n",
    confirmCommit: "æ‚¨ç¡®å®šè¦æ‰§è¡Œä¸Šè¿°æäº¤å—ï¼Ÿ",
  },

  allowCustomScopes: true,
  allowBreakingChanges: ["feat", "fix"],

  subjectLimit: 100,
};
```

---

## ä½¿ç”¨æ–¹å¼

ä»¥åæäº¤å°±ä¸è¦ç”¨ `git commit`â€‹ äº†ï¼Œç›´æ¥ï¼š

```bash
npx cz
```

æ¥ä¸‹æ¥æŒ‰æç¤ºä¸€æ­¥æ­¥é€‰ï¼š

âœ… æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ  
âœ… æ”¹åŠ¨äº†å“ªä¸€å—ï¼Ÿ  
âœ… ç®€å•è¯´è¯´åšäº†å•¥ï¼Ÿ

æœ€åå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆç±»ä¼¼ï¼š

```
fix(api): ä¿®å¤æŸ¥è¯¢æ¥å£å‚æ•°é”™è¯¯
```

æ¼‚äº®åˆæ ‡å‡†ï¼

**å¦‚æœä½ åœ¨ä½¿ç”¨ â€‹`Visual Studio Code`ï¼Œå®‰è£…`Visual Studio Code Commitizen Support`æ‰©å±•åè¿˜å¯ä»¥ç›´æ¥åœ¨æºä»£ç ç®¡ç†ä¸­ç›´æ¥ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ â€‹**â€‹

---

## æœ€åçš„è¯

æˆ‘ä¸æ˜¯ä¸“ä¸šæè§„èŒƒçš„äººï¼Œä¹Ÿä¸æ˜¯åœ¨ä»€ä¹ˆå¤§å‚æäº†åå¹´æµç¨‹ï¼Œæˆ‘åªæ˜¯è¢«æäº¤ä¿¡æ¯æå¾—çƒ¦äº†ï¼Œè‡ªå·±å­¦äº†ä¸€ä¸‹ï¼Œè§‰å¾—è¿™ä¸ªæ–¹æ¡ˆå¯¹æˆ‘å¾ˆæœ‰ç”¨ï¼Œå°±æƒ³åˆ†äº«å‡ºæ¥ã€‚

ä½ è¦æ˜¯ä¹Ÿæœ‰ç±»ä¼¼çš„çƒ¦æ¼ï¼Œæˆ–è€…å›¢é˜Ÿäººä¸å¤šä½†ä¹Ÿå¸Œæœ›èƒ½â€œç¨å¾®æœ‰ç‚¹è§„èŒƒâ€ï¼Œé‚£å°±è¯•è¯•è¿™ä¸ªæ–¹æ¡ˆå§ï½

å½“ç„¶å•¦ï¼Œè¿™ç§æ–¹å¼è‚¯å®šä¸æ˜¯å”¯ä¸€æ–¹æ¡ˆï¼Œå·²ç»å¾ˆå¤šå¤§å›¢é˜Ÿç”¨å¾—æ›´æ·±æ›´è‡ªåŠ¨åŒ–ï¼Œæˆ‘è¿™ä¸ªæ›´åƒæ˜¯å…¥é—¨è½»é‡ç‰ˆï¼Œä½†å·²ç»èƒ½è§£å†³å¾ˆå¤šå°çƒ¦æ¼äº†ã€‚

---

ğŸ§¡ å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©
